
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC방 관리자 - 좌석관리</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        header {
            background-color: #333;
            color: white;
            padding: 1rem;
            text-align: center;
        }

        .seats-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .seat {
            border: 2px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            position: relative;
            background-color: #f9f9f9;
        }

        .seat.occupied {
            border-color: #4CAF50;
            background-color: #E8F5E9;
        }

        .seat-number {
            position: absolute;
            top: 5px;
            left: 5px;
            background-color: #333;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
        }

        .seat-info {
            margin-top: 15px;
            text-align: center;
        }

        .context-menu {
            display: none;
            position: fixed;
            background-color: white;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .context-menu button {
            display: block;
            width: 100%;
            padding: 8px 15px;
            border: none;
            background: none;
            cursor: pointer;
            text-align: left;
        }

        .context-menu button:hover {
            background-color: #f0f0f0;
        }

        #chargePopup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 1100;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
        }

        .popup-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .popup-buttons button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .confirm-btn {
            background-color: #4CAF50;
            color: white;
        }

        .cancel-btn {
            background-color: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>PC방 관리자 - 좌석관리</h1>
    </header>

    <div class="seats-container" id="seatsContainer">
        <!-- 좌석들은 JavaScript로 생성됩니다 -->
    </div>

    <div id="contextMenu" class="context-menu">
        <button onclick="forceLogout()">강제 로그아웃</button>
        <button onclick="showChargePopup()">시간 충전</button>
    </div>

    <div id="overlay"></div>

    <div id="chargePopup">
        <h2>시간 충전</h2>
        <p>좌석 번호: <span id="selectedSeatNumber"></span></p>
        <p>사용자: <span id="selectedUserName"></span></p>
        <select id="timeSelect">
            <option value="1">1시간 추가</option>
            <option value="2">2시간 추가</option>
            <option value="3">3시간 추가</option>
            <option value="5">5시간 추가</option>
            <option value="10">10시간 추가</option>
            <option value="50">50시간 추가</option>
            <option value="100">100시간 추가</option>
        </select>
        <div class="popup-buttons">
            <button class="cancel-btn" onclick="hideChargePopup()">취소</button>
            <button class="confirm-btn" onclick="addTime()">충전</button>
        </div>
    </div>

    <script>
        let selectedSeat = null;
        const users = [
            { id: 1, name: "김철수", remainingTime: 3600 }, // 1시간
            { id: 2, name: "이영희", remainingTime: 7200 }, // 2시간
            { id: 3, name: "박민수", remainingTime: 5400 }  // 1.5시간
        ];

        // 좌석 초기화
        function initializeSeats() {
            const container = document.getElementById('seatsContainer');
            for (let i = 1; i <= 20; i++) {
                const seat = document.createElement('div');
                seat.className = 'seat';
                seat.setAttribute('data-seat-number', i);
                
                const seatNumber = document.createElement('div');
                seatNumber.className = 'seat-number';
                seatNumber.textContent = i;
                
                const seatInfo = document.createElement('div');
                seatInfo.className = 'seat-info';
                
                // 임의로 몇 개의 좌석에 사용자 배정
                if (i <= 3) {
                    seat.classList.add('occupied');
                    const user = users[i-1];
                    seatInfo.innerHTML = `
                        <p>사용자: ${user.name}</p>
                        <p>남은시간: ${formatTime(user.remainingTime)}</p>
                    `;
                    seat.setAttribute('data-user-id', user.id);
                } else {
                    seatInfo.textContent = '비어있음';
                }
                
                seat.appendChild(seatNumber);
                seat.appendChild(seatInfo);
                container.appendChild(seat);
                
                // 우클릭 이벤트 추가
                seat.addEventListener('contextmenu', showContextMenu);
            }
        }

        function showContextMenu(e) {
            e.preventDefault();
            if (!e.target.closest('.seat').classList.contains('occupied')) return;
            
            selectedSeat = e.target.closest('.seat');
            const contextMenu = document.getElementById('contextMenu');
            contextMenu.style.display = 'block';
            contextMenu.style.left = e.pageX + 'px';
            contextMenu.style.top = e.pageY + 'px';
        }

        function forceLogout() {
            if (!selectedSeat) return;
            
            const seatInfo = selectedSeat.querySelector('.seat-info');
            selectedSeat.classList.remove('occupied');
            selectedSeat.removeAttribute('data-user-id');
            seatInfo.textContent = '비어있음';
            
            hideContextMenu();
            alert('사용자가 강제 로그아웃되었습니다.');
        }

        function showChargePopup() {
            if (!selectedSeat) return;
            
            const seatNumber = selectedSeat.getAttribute('data-seat-number');
            const userId = selectedSeat.getAttribute('data-user-id');
            const user = users.find(u => u.id === parseInt(userId));
            
            document.getElementById('selectedSeatNumber').textContent = seatNumber;
            document.getElementById('selectedUserName').textContent = user.name;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('chargePopup').style.display = 'block';
            
            hideContextMenu();
        }

        function hideChargePopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('chargePopup').style.display = 'none';
        }

        function addTime() {
            if (!selectedSeat) return;
            
            const userId = selectedSeat.getAttribute('data-user-id');
            const user = users.find(u => u.id === parseInt(userId));
            const hours = parseInt(document.getElementById('timeSelect').value);
            
            user.remainingTime += hours * 3600;
            updateSeatInfo(selectedSeat, user);
            
            hideChargePopup();
            alert(`${hours}시간이 추가되었습니다.`);
        }

        function updateSeatInfo(seat, user) {
            const seatInfo = seat.querySelector('.seat-info');
            seatInfo.innerHTML = `
                <p>사용자: ${user.name}</p>
                <p>남은시간: ${formatTime(user.remainingTime)}</p>
            `;
        }

        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            return `${hours}시간 ${minutes}분`;
        }

        function hideContextMenu() {
            document.getElementById('contextMenu').style.display = 'none';
        }

        // 페이지 로드 시 좌석 초기화
        document.addEventListener('DOMContentLoaded', initializeSeats);

        // 다른 곳 클릭 시 컨텍스트 메뉴 숨기기
        document.addEventListener('click', hideContextMenu);
    </script>
</body>
</html>